{
	"info": {
		"_postman_id": "backend-api-collection",
		"name": "Backend API - Dashboard de Facturas",
		"description": "Collection completa para probar todos los endpoints de la API de Dashboard de Facturas",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "12345678"
	},
	"item": [
		{
			"name": "üîê Autenticaci√≥n",
			"item": [
				{
					"name": "Login",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"admin@empresa.com\",\n  \"password\": \"Admin123!\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/auth/login",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"auth",
								"login"
							]
						},
						"description": "Iniciar sesi√≥n y obtener token JWT"
					},
					"response": []
				},
				{
					"name": "Obtener Perfil",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/auth/me",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"auth",
								"me"
							]
						},
						"description": "Obtener perfil del usuario autenticado"
					},
					"response": []
				},
				{
					"name": "Verificar Token",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/auth/verify",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"auth",
								"verify"
							]
						},
						"description": "Verificar si el token es v√°lido"
					},
					"response": []
				},
				{
					"name": "Cambiar Password",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"currentPassword\": \"Admin123!\",\n  \"newPassword\": \"NewPassword123!\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/auth/change-password",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"auth",
								"change-password"
							]
						},
						"description": "Cambiar contrase√±a del usuario autenticado"
					},
					"response": []
				},
				{
					"name": "Logout",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/auth/logout",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"auth",
								"logout"
							]
						},
						"description": "Cerrar sesi√≥n e invalidar token"
					},
					"response": []
				},
				{
					"name": "Crear Usuario (Admin)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"nombre\": \"Juan\",\n  \"apellido\": \"P√©rez\",\n  \"email\": \"juan.perez@empresa.com\",\n  \"password\": \"Password123!\",\n  \"rol\": \"usuario\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/auth/users",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"auth",
								"users"
							]
						},
						"description": "Crear nuevo usuario (solo administradores)"
					},
					"response": []
				}
			],
			"description": "Endpoints de autenticaci√≥n y gesti√≥n de usuarios"
		},
		{
			"name": "üìä Dashboard",
			"item": [
				{
					"name": "Overview",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/dashboard/overview",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"dashboard",
								"overview"
							]
						},
						"description": "M√©tricas generales del dashboard"
					},
					"response": []
				},
				{
					"name": "M√©tricas",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/dashboard/metrics?fechaInicio=2024-01-01&fechaFin=2024-12-31",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"dashboard",
								"metrics"
							],
							"query": [
								{
									"key": "fechaInicio",
									"value": "2024-01-01"
								},
								{
									"key": "fechaFin",
									"value": "2024-12-31"
								}
							]
						},
						"description": "M√©tricas con filtros opcionales"
					},
					"response": []
				},
				{
					"name": "Gr√°ficos",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/dashboard/charts",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"dashboard",
								"charts"
							]
						},
						"description": "Datos para gr√°ficos del dashboard"
					},
					"response": []
				},
				{
					"name": "Alertas",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/dashboard/alertas",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"dashboard",
								"alertas"
							]
						},
						"description": "Alertas del sistema"
					},
					"response": []
				},
				{
					"name": "Performance",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/dashboard/performance",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"dashboard",
								"performance"
							]
						},
						"description": "Estad√≠sticas de rendimiento"
					},
					"response": []
				},
				{
					"name": "Datos Completos",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/dashboard/data",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"dashboard",
								"data"
							]
						},
						"description": "Todos los datos del dashboard"
					},
					"response": []
				}
			],
			"description": "Endpoints del dashboard y m√©tricas"
		},
		{
			"name": "üìÑ Facturas",
			"item": [
				{
					"name": "Listar Facturas",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/facturas?page=1&limit=25&estado=procesado&fechaInicio=2024-01-01&fechaFin=2024-12-31",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"facturas"
							],
							"query": [
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "limit",
									"value": "25"
								},
								{
									"key": "estado",
									"value": "procesado"
								},
								{
									"key": "fechaInicio",
									"value": "2024-01-01"
								},
								{
									"key": "fechaFin",
									"value": "2024-12-31"
								}
							]
						},
						"description": "Lista de facturas con filtros y paginaci√≥n"
					},
					"response": []
				},
				{
					"name": "B√∫squeda de Facturas",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/facturas/search?search=factura&estado=procesado&page=1&limit=10",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"facturas",
								"search"
							],
							"query": [
								{
									"key": "search",
									"value": "factura"
								},
								{
									"key": "estado",
									"value": "procesado"
								},
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "limit",
									"value": "10"
								}
							]
						},
						"description": "B√∫squeda avanzada de facturas"
					},
					"response": []
				},
				{
					"name": "Sugerencias",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/facturas/suggestions?q=fact",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"facturas",
								"suggestions"
							],
							"query": [
								{
									"key": "q",
									"value": "fact"
								}
							]
						},
						"description": "Sugerencias para b√∫squeda"
					},
					"response": []
				},
				{
					"name": "Obtener Factura por ID",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/facturas/{{factura_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"facturas",
								"{{factura_id}}"
							]
						},
						"description": "Detalle de factura por ID"
					},
					"response": []
				},
				{
					"name": "Items de Factura",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/facturas/{{factura_id}}/items",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"facturas",
								"{{factura_id}}",
								"items"
							]
						},
						"description": "Items de una factura espec√≠fica"
					},
					"response": []
				},
				{
					"name": "Archivos de Factura",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/facturas/{{factura_id}}/archivos",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"facturas",
								"{{factura_id}}",
								"archivos"
							]
						},
						"description": "Archivos asociados a una factura"
					},
					"response": []
				},
				{
					"name": "Actualizar Estado",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"estado\": \"revisado\",\n  \"comentario\": \"Factura revisada y aprobada\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/facturas/{{factura_id}}/estado",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"facturas",
								"{{factura_id}}",
								"estado"
							]
						},
						"description": "Actualizar estado de factura"
					},
					"response": []
				},
				{
					"name": "Eliminar Factura",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/facturas/{{factura_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"facturas",
								"{{factura_id}}"
							]
						},
						"description": "Eliminar factura (soft delete)"
					},
					"response": []
				}
			],
			"description": "Endpoints de gesti√≥n de facturas"
		},
		{
			"name": "üè¢ Emisores",
			"item": [
				{
					"name": "Listar Emisores",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/emisores?page=1&limit=25",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"emisores"
							],
							"query": [
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "limit",
									"value": "25"
								}
							]
						},
						"description": "Lista de emisores con estad√≠sticas"
					},
					"response": []
				},
				{
					"name": "Top Emisores",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/emisores/top?limit=10&metric=facturas",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"emisores",
								"top"
							],
							"query": [
								{
									"key": "limit",
									"value": "10"
								},
								{
									"key": "metric",
									"value": "facturas"
								}
							]
						},
						"description": "Top emisores por m√©trica"
					},
					"response": []
				},
				{
					"name": "Emisor por RUC",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/emisores/{{emisor_ruc}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"emisores",
								"{{emisor_ruc}}"
							]
						},
						"description": "Detalle de emisor por RUC"
					},
					"response": []
				},
				{
					"name": "Facturas por Emisor",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/emisores/{{emisor_ruc}}/facturas?page=1&limit=25",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"emisores",
								"{{emisor_ruc}}",
								"facturas"
							],
							"query": [
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "limit",
									"value": "25"
								}
							]
						},
						"description": "Facturas de un emisor espec√≠fico"
					},
					"response": []
				}
			],
			"description": "Endpoints de gesti√≥n de emisores"
		},
		{
			"name": "üìà Reportes",
			"item": [
				{
					"name": "Dashboard de Reportes",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/reportes/dashboard",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"reportes",
								"dashboard"
							]
						},
						"description": "Dashboard de reportes"
					},
					"response": []
				},
				{
					"name": "Reporte de Ventas",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/reportes/ventas?fechaInicio=2024-01-01&fechaFin=2024-12-31&formato=json",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"reportes",
								"ventas"
							],
							"query": [
								{
									"key": "fechaInicio",
									"value": "2024-01-01"
								},
								{
									"key": "fechaFin",
									"value": "2024-12-31"
								},
								{
									"key": "formato",
									"value": "json"
								}
							]
						},
						"description": "Reporte de ventas por per√≠odo"
					},
					"response": []
				},
				{
					"name": "Reporte ITBMS",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/reportes/itbms?mes=12&a√±o=2024",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"reportes",
								"itbms"
							],
							"query": [
								{
									"key": "mes",
									"value": "12"
								},
								{
									"key": "a√±o",
									"value": "2024"
								}
							]
						},
						"description": "Reporte de ITBMS"
					},
					"response": []
				},
				{
					"name": "Performance OCR",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/reportes/ocr-performance?fechaInicio=2024-01-01&fechaFin=2024-12-31",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"reportes",
								"ocr-performance"
							],
							"query": [
								{
									"key": "fechaInicio",
									"value": "2024-01-01"
								},
								{
									"key": "fechaFin",
									"value": "2024-12-31"
								}
							]
						},
						"description": "Reporte de performance del OCR"
					},
					"response": []
				},
				{
					"name": "Actividad Emisores",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/reportes/actividad-emisores?periodo=30",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"reportes",
								"actividad-emisores"
							],
							"query": [
								{
									"key": "periodo",
									"value": "30"
								}
							]
						},
						"description": "Reporte de actividad de emisores"
					},
					"response": []
				},
				{
					"name": "Exportar Datos",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"tipo\": \"facturas\",\n  \"formato\": \"csv\",\n  \"filtros\": {\n    \"fechaInicio\": \"2024-01-01\",\n    \"fechaFin\": \"2024-12-31\",\n    \"estado\": \"procesado\"\n  }\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/reportes/export",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"reportes",
								"export"
							]
						},
						"description": "Exportar datos (JSON/CSV)"
					},
					"response": []
				}
			],
			"description": "Endpoints de reportes y exportaci√≥n"
		},
		{
			"name": "üîç B√∫squeda",
			"item": [
				{
					"name": "B√∫squeda de Facturas",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/busqueda/facturas?q=factura&estado=procesado&page=1&limit=10",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"busqueda",
								"facturas"
							],
							"query": [
								{
									"key": "q",
									"value": "factura"
								},
								{
									"key": "estado",
									"value": "procesado"
								},
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "limit",
									"value": "10"
								}
							]
						},
						"description": "B√∫squeda de facturas"
					},
					"response": []
				},
				{
					"name": "Sugerencias de B√∫squeda",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/busqueda/suggestions?q=fact",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"busqueda",
								"suggestions"
							],
							"query": [
								{
									"key": "q",
									"value": "fact"
								}
							]
						},
						"description": "Sugerencias de b√∫squeda"
					},
					"response": []
				}
			],
			"description": "Endpoints de b√∫squeda y sugerencias"
		},
		{
			"name": "üìö Documentaci√≥n",
			"item": [
				{
					"name": "API Documentation",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/docs",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"docs"
							]
						},
						"description": "Documentaci√≥n completa de la API"
					},
					"response": []
				}
			],
			"description": "Documentaci√≥n de la API"
		},
		{
			"name": "üè• Health Check",
			"item": [
				{
					"name": "Health Check",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/health",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"health"
							]
						},
						"description": "Verificar estado del servidor"
					},
					"response": []
				}
			],
			"description": "Verificaci√≥n de estado del servidor"
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:3001",
			"type": "string"
		},
		{
			"key": "auth_token",
			"value": "",
			"type": "string"
		},
		{
			"key": "factura_id",
			"value": "1",
			"type": "string"
		},
		{
			"key": "emisor_ruc",
			"value": "12345678901",
			"type": "string"
		}
	]
} 